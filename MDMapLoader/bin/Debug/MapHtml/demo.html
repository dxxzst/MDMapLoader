<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>百度离线版2.0DEMO</title>
    <script type="text/javascript" src="js/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="js/json2.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=0D8eZkNNh5VTsGSbGm6Q4vFH"></script>
    <script type="text/javascript" src="js/findtiles.js"></script>
    <style>
        html, body {
            margin: 0px;
            height: 100%;
        }
    </style>
</head>
<body>
    <div style="width:100%;height:100%; border:1px solid gray" id="container"></div>
</body>
</html>
<script type="text/javascript">
    var map = new BMap.Map("container");      //设置普通底图
    var point = new BMap.Point(111.404, 40.915);    // 创建点坐标
    map.centerAndZoom(point,5);                     // 初始化地图,设置中心点坐标和地图级别。

    map.addControl(new BMap.MapTypeControl());   //添加地图类型控件
    map.addControl(new BMap.NavigationControl());
    map.addControl(new BMap.ScaleControl({ anchor: BMAP_ANCHOR_TOP_LEFT })); // 左上角，添加比例尺
    map.enableScrollWheelZoom();                  // 启用滚轮放大缩小。
    //map.enableKeyboard();                         // 启用键盘操作。
</script>

<script>
    //下载瓦片图
    function addUrls(tiles) {
        window.external.ShowMessage(tiles); //返回
    }

    function findtiles(minZoom, maxZoom) {
        var findAllTiles = downloadBaiduTiles(minZoom, maxZoom);
        findAllTiles(map, addUrls);
    }
</script>

<script>
    //显示经纬度
    map.addEventListener("mousemove", function (e) {
        var showMessage = "等级:" + map.getZoom()  + "  经纬度:" + e.point.lng + ", " + e.point.lat;
        window.external.ShowMousePoint(showMessage); //返回
    });
</script>

<script>
    //网格线
    var tileLayerLine = new BMap.TileLayer({ isTransparentPng: true });
    tileLayerLine.getTilesUrl = function (tileCoord, zoom) {
        zooma = zoom;
        var x = tileCoord.x;
        var y = tileCoord.y;
        return "http://developer.baidu.com/map/jsdemo/img/border.png";
    }

    function addOrRemoveLayerLine(show) {
        if (show == "YES") {
            map.addTileLayer(tileLayerLine);
        }
        else {
            map.removeTileLayer(tileLayerLine);
        }
    }
</script>